webpackJsonp([1],{0:function(t,e,n){t.exports=n("cDNt")},1:function(t,e){},"4uzM":function(t,e){t.exports='<p>please, login</p>\n\n<button (click)="githubLogin()" class="button">with github</button>\n<button (click)="facebookLogin()" class="button">with facebook</button>\n'},BZHD:function(t,e,n){(t.exports=n("rP7Y")(!1)).push([t.i,"",""]),t.exports=t.exports.toString()},Dk7z:function(t,e,n){(t.exports=n("rP7Y")(!1)).push([t.i,"",""]),t.exports=t.exports.toString()},I1xy:function(t,e){t.exports='<div *ngIf="gameService.game">\n  <h1>{{ gameService.game.name }}</h1>\n  <p>USER ID: {{ auth.user.id }}</p>\n  <p>GAME ID: {{ gameService.game.id }} | Status: {{ gameService.game.status }}</p>\n  <div *ngIf="gameService.game.creator !== auth.user.id">\n    <p>{{ gameService.gameMessage }}</p>\n  </div>\n  <div *ngIf="gameService.game.creator == auth.user.id">\n    <ul>\n      <li *ngFor="let user of gameService.joinedUsers">\n        El usuario {{ user.username }} se ha unido al juego\n      </li>\n    </ul>\n  </div>\n  <div *ngIf="gameService.game.creator == auth.user.id">\n    <button (click)="startGame()">START THE GAME</button>\n  </div>\n  <div *ngIf="gameService.currentQuestion">\n    <p>Ya hay pregunta</p>\n    <app-question [question]="gameService.currentQuestion"></app-question>\n  </div>\n</div>\n'},I3yk:function(t,e){t.exports='<p>Question component</p>\n<div *ngIf="question">\n  <p>{{ question.category }}\n  <img *ngIf="question.questionIsImg" [src]="question.questionImg">\n  <pre *ngIf="question.questionIsCode">\n    <code [class]="question.category">\n{{ question.questionCode }}\n    </code>\n  </pre>\n  <p>{{ question.question }}</p>\n  <div>\n    <ul>\n      <li *ngFor="let a of question.answers">\n        {{ a }}\n      </li>\n    </ul>\n  </div>\n  <button (click)="submitAnswer(question.id, a)">Enviar</button>\n</div>\n'},YuZA:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="YuZA"},auOE:function(t,e){t.exports='<h2>Home: Game selector</h2>\n<button (click)="logout()">Logout</button>\n<div *ngIf="openGames; else noOpenGames">\n  <p>Join a game</p>\n  <ul>\n    <li *ngFor="let game of openGames" class="game-item">\n      <a [routerLink]="[\'/game\', game.id]"><strong>{{ game.name }}</strong></a> | Number of Players: {{ game.participants.length }}\n      <button (click)="joinGame(game.id)">Join this game</button>\n    </li>\n  </ul>\n</div>\n<ng-template #noOpenGames>\n<div><p>No hay ninguna partida en marcha</p></div>\n</ng-template>\n<hr>\n<p>Or create a new one</p>\n<form>\n  <label>name\n    <input type="text" [(ngModel)]="gameName" name="gameName">\n  </label>\n  <button (click)="newGame(gameName)">New Game</button>\n</form>\n'},cDNt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),i=n("x8Hs"),r=n("UHIZ"),a=n("9iV4"),c=(n("GQSG"),n("HT7u"),n("U6yM")),s={production:!0,apiUrl:""},u=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t){this.http=t,this.loginEvent=new o.v,this.isAuthenticated()}return t.prototype.checkAuthentication=function(){return null!==this.user&&void 0!==this.user},t.prototype.isAuthenticated=function(){var t=this;return this.http.get(s.apiUrl+"/auth/user").subscribe(function(e){t.setUser(e)},function(e){t.handleError})},t.prototype.authGithub=function(){window.location.href=s.apiUrl+"/auth/github"},t.prototype.authFacebook=function(){window.location.href=s.apiUrl+"/auth/facebook"},t.prototype.authLogout=function(){var t=this;return this.http.get(s.apiUrl+"/auth/logout").map(function(e){return t.setUser(null)})},t.prototype.setUser=function(t){return this.user=t,this.loginEvent.emit(t),this.user},t.prototype.handleError=function(t){return console.error(t),c.a.throw(t.json())},t=u([Object(o.A)(),p("design:paramtypes",[a.b])],t)}(),h=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},g=function(){function t(t,e){this.authService=t,this.router=e}return t.prototype.canActivate=function(t,e){var n=this.authService.checkAuthentication();return n||this.router.navigate(["login"]),n},t=h([Object(o.A)(),l("design:paramtypes",[f,r.b])],t)}(),m=n("MjLF"),d=n("xrDH"),b=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},y=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},v=function(){function t(t){this.http=t,this.baseUrl=s.apiUrl+"/api",this.gameEvent=new o.v,this.joinedUsers=[],this.gameMessage="Espera un momento, el juego comenzar\xe1 en breve",this.currentQuestion=null,this.questionTime=null,this.socket=m.connect(s.apiUrl),this.socket.on("start-game",function(t){this.gameMessage="La partida va a empezar"}.bind(this)),this.socket.on("question",function(t){t.question.answers=d.shuffle(t.question.answers),this.currentQuestion=t.question,this.questionTime=t.questionTime}.bind(this)),this.socket.on("recibe-user",function(t){d.includes(this.joinedUsers,t)||this.joinedUsers.push(t)}.bind(this))}return t.prototype.joinGame=function(t){var e=this;this.http.put(this.baseUrl+"/game/"+t,{}).map(function(t){var n=t.game;e.setGame(n);var o=n.participants.length,i=n.participants[o-1];e.socket.emit("join-game",{userId:i.id})}).catch(this.handleError).subscribe()},t.prototype.adminStartGame=function(){var t=this,e=this.game.id;return console.log("Starting setted game "+e),this.http.put(this.baseUrl+"/game/start/"+e,{}).subscribe(function(e){t.socket.emit("init-game",{gameId:e.id})})},t.prototype.setGame=function(t){return this.game=t,this.gameEvent.emit(t),this.game},t.prototype.handleError=function(t){return console.error(t),c.a.throw(t.json())},t=b([Object(o.A)(),y("design:paramtypes",[a.b])],t)}(),j=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},R=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},O=function(){function t(t){this.http=t,this.baseUrl=s.apiUrl+"/api"}return t.prototype.createGame=function(t){return this.http.post(this.baseUrl+"/game",{gameName:t})},t.prototype.getOpenGames=function(){return this.http.get(this.baseUrl+"/games?status=open")},t.prototype.getInPlayGames=function(){return this.http.get(this.baseUrl+"/games?status=playing")},t.prototype.checkUserGames=function(t){return this.http.get(this.baseUrl+"/gameuser?id="+t)},t.prototype.getGame=function(t){return this.http.get(this.baseUrl+"/game?id="+t)},t=j([Object(o.A)(),R("design:paramtypes",[a.b])],t)}(),_=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},S=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},G=function(){function t(t,e,n,o){var i=this;this.gameService=t,this.gameManagerService=e,this.auth=n,this.router=o,this.gameManagerService.getOpenGames().subscribe(function(t){return i.openGames=t})}return t.prototype.ngOnInit=function(){var t=this;this.gameManagerService.checkUserGames(this.auth.user.id).subscribe(function(e){null!==e&&void 0!==e&&t.router.navigate(["game",e._gameId])})},t.prototype.logout=function(){var t=this;this.auth.authLogout().subscribe(function(){t.router.navigate(["login"])})},t.prototype.newGame=function(t){var e=this;this.gameManagerService.createGame(t).subscribe(function(t){e.router.navigate(["game",t.id])})},t.prototype.joinGame=function(t){this.router.navigate(["game",t])},t=_([Object(o.n)({selector:"app-home",template:n("auOE"),styles:[n("Dk7z")]}),S("design:paramtypes",[v,O,f,r.b])],t)}(),w=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},k=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},I=function(){function t(t,e){this.authService=t,this.router=e}return t.prototype.ngOnInit=function(){var t=this;this.authService.loginEvent.subscribe(function(e){t.router.navigate(["home"])})},t.prototype.githubLogin=function(){this.authService.authGithub()},t.prototype.facebookLogin=function(){this.authService.authFacebook()},t=w([Object(o.n)({selector:"app-login",template:n("4uzM"),styles:[n("im93")]}),k("design:paramtypes",[f,r.b])],t)}(),U=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},P=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},q=function(){function t(t,e,n){var o=this;this.gameService=t,this.route=e,this.auth=n,this.route.params.subscribe(function(t){o.gameService.joinGame(t.id)})}return t.prototype.startGame=function(){this.gameService.adminStartGame()},t=U([Object(o.n)({selector:"app-game",template:n("I1xy"),styles:[n("BZHD")]}),P("design:paramtypes",[v,r.a,f])],t)}(),x=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:I},{path:"home",component:G,canActivate:[g]},{path:"game/:id",component:q,canActivate:[g]},{path:"**",redirectTo:""}],D=n("0nO6"),E=function(){function t(){}return t.prototype.intercept=function(t,e){var n=t.clone({withCredentials:!0});return e.handle(n)},t}(),M=n("RyBE"),A=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},L=function(){function t(){this.title="Iron Trivial"}return t=A([Object(o.n)({selector:"app-root",template:n("efyd")})],t)}(),T=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},N=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},H=function(){function t(){}return t.prototype.ngOnInit=function(){},T([Object(o.D)(),N("design:type",Object)],t.prototype,"question",void 0),t=T([Object(o.n)({selector:"app-question",template:n("I3yk"),styles:[n("lmS7")]}),N("design:paramtypes",[])],t)}(),F=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},Y=function(){function t(){}return t=F([Object(o.I)({declarations:[L,I,G,q,H],imports:[M.a,a.c,D.a,r.c.forRoot(x)],providers:[{provide:a.a,useClass:E,multi:!0},f,v,O,g],bootstrap:[L]})],t)}();s.production&&Object(o._13)(),Object(i.a)().bootstrapModule(Y).catch(function(t){return console.log(t)})},efyd:function(t,e){t.exports="<router-outlet></router-outlet>\n"},im93:function(t,e,n){(t.exports=n("rP7Y")(!1)).push([t.i,"",""]),t.exports=t.exports.toString()},lmS7:function(t,e,n){(t.exports=n("rP7Y")(!1)).push([t.i,"",""]),t.exports=t.exports.toString()}},[0]);